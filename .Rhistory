guide = 'legend',
guide_colorbar(title = 'Pickups'),
breaks = my_breaks,
labels = comma, my_breaks,
colors = colorRampPalette(bias = .45,
rev(brewer.pal(11, 'RdYlGn')))(100)) +
ggtitle('Uber Pickups Scatterplot Map') +
scale_size(guide = 'none',
breaks = my_breaks) +
guides(alpha = F)
nycMap +
geom_point(aes(x = lon,
y = lat,
size = rides,
color = rides,
alpha = 1),
#alpha = .01,
data = uber_known.by_loc) +
scale_color_gradientn(trans = "log10",
guide = 'legend',
guide_colorbar(title = 'Pickups'),
breaks = my_breaks,
labels = comma, my_breaks,
colors = colorRampPalette(bias = .45,
rev(brewer.pal(11, 'RdYlGn')))(100)) +
ggtitle('Uber Pickups Scatterplot Map') +
scale_size(guide = 'none',
breaks = my_breaks) +
guides(alpha = F)
nycMap +
geom_point(aes(x = lon,
y = lat,
size = rides,
color = rides,
alpha = 1/rides),
#alpha = .01,
data = uber_known.by_loc) +
scale_color_gradientn(trans = "log10",
guide = 'legend',
guide_colorbar(title = 'Pickups'),
breaks = my_breaks,
labels = comma, my_breaks,
colors = colorRampPalette(bias = .45,
rev(brewer.pal(11, 'RdYlGn')))(100)) +
ggtitle('Uber Pickups Scatterplot Map') +
scale_size(guide = 'none',
breaks = my_breaks) +
guides(alpha = F)
nycMap +
geom_point(aes(x = lon,
y = lat,
size = rides,
color = rides,
alpha = 1/log10(rides)),
#alpha = .01,
data = uber_known.by_loc) +
scale_color_gradientn(trans = "log10",
guide = 'legend',
guide_colorbar(title = 'Pickups'),
breaks = my_breaks,
labels = comma, my_breaks,
colors = colorRampPalette(bias = .45,
rev(brewer.pal(11, 'RdYlGn')))(100)) +
ggtitle('Uber Pickups Scatterplot Map') +
scale_size(guide = 'none',
breaks = my_breaks) +
guides(alpha = F)
nycMap +
geom_point(aes(x = lon,
y = lat,
size = rides,
color = rides,
alpha = 1000000/log10(rides)),
#alpha = .01,
data = uber_known.by_loc) +
scale_color_gradientn(trans = "log10",
guide = 'legend',
guide_colorbar(title = 'Pickups'),
breaks = my_breaks,
labels = comma, my_breaks,
colors = colorRampPalette(bias = .45,
rev(brewer.pal(11, 'RdYlGn')))(100)) +
ggtitle('Uber Pickups Scatterplot Map') +
scale_size(guide = 'none',
breaks = my_breaks) +
guides(alpha = F)
nycMap +
geom_point(aes(x = lon,
y = lat,
size = rides,
color = rides,
alpha = log10(rides)),
#alpha = .01,
data = uber_known.by_loc) +
scale_color_gradientn(trans = "log10",
guide = 'legend',
guide_colorbar(title = 'Pickups'),
breaks = my_breaks,
labels = comma, my_breaks,
colors = colorRampPalette(bias = .45,
rev(brewer.pal(11, 'RdYlGn')))(100)) +
ggtitle('Uber Pickups Scatterplot Map') +
scale_size(guide = 'none',
breaks = my_breaks) +
guides(alpha = F)
nycMap +
geom_point(aes(x = lon,
y = lat,
size = rides,
color = rides,
alpha = .5),
#alpha = .01,
data = uber_known.by_loc) +
scale_color_gradientn(trans = "log10",
guide = 'legend',
guide_colorbar(title = 'Pickups'),
breaks = my_breaks,
labels = comma, my_breaks,
colors = colorRampPalette(bias = .45,
rev(brewer.pal(11, 'RdYlGn')))(100)) +
ggtitle('Uber Pickups Scatterplot Map') +
scale_size(guide = 'none',
breaks = my_breaks) +
guides(alpha = F)
range(uber_known.by_loc$rides)
# Number of pickups over time colored by day
ggplot(uber,
aes(x = date)) +
geom_histogram(binwidth = 1,
aes(fill = day)) +
scale_x_continuous(breaks = seq(7, 28, 7)) +
scale_y_continuous(labels = comma) +
scale_fill_brewer(type = 'seq', palette = 1) +
ggtitle('Monthly Pickups Colored by Day') +
labs(fill = 'Day') +
xlab('Date') +
ylab('Number of Pickups') +
facet_wrap(~ month) +
ggsave('graphs/monthly_pickups_histogram.png',
width = 12,
height = 8,
units = 'in')
?scale_fill_brewer
ggplot(uber,
aes(x = date)) +
geom_histogram(binwidth = 1,
aes(fill = day)) +
scale_x_continuous(breaks = seq(7, 28, 7)) +
scale_y_continuous(labels = comma) +
scale_fill_brewer(type = 'seq', palette = 18) +
ggtitle('Monthly Pickups Colored by Day') +
labs(fill = 'Day') +
xlab('Date') +
ylab('Number of Pickups') +
facet_wrap(~ month) +
ggsave('graphs/monthly_pickups_histogram.png',
width = 12,
height = 8,
units = 'in')
ggplot(uber,
aes(x = date)) +
geom_histogram(binwidth = 1,
aes(fill = day)) +
scale_x_continuous(breaks = seq(7, 28, 7)) +
scale_y_continuous(labels = comma) +
scale_fill_brewer(type = 'seq', palette = 16) +
ggtitle('Monthly Pickups Colored by Day') +
labs(fill = 'Day') +
xlab('Date') +
ylab('Number of Pickups') +
facet_wrap(~ month) +
ggsave('graphs/monthly_pickups_histogram.png',
width = 12,
height = 8,
units = 'in')
# Number of rides per hour scatterplot with a line for every day (Sun - Sat)
ggplot(uber.by_hour,
aes(x = hour,
y = rides)) +
geom_point(alpha = .2,
position = position_jitter()) +
geom_line(aes(color = day),
stat = 'summary',
fun.y = quantile,
fun.args  =list(probs = .5)) +
ggtitle('Pickups by Hour with Daily Median') +
labs(color = 'Day') +
ylab('Number of Pickups') +
xlab('Time') +
labs(color = 'Day') +
scale_x_continuous(breaks = 0:23) +
scale_color_brewer(type = 'seq',
palette = 18) +
ggsave('graphs/rides_per_hour_scatter_with_daily_medians.png',
width = 12,
height = 8,
units = 'in')
?get_map
nyc <- get_map(location = c(lon_left,
lat_bottom,
lon_right,
lat_top),
source = 'stamen',
color = 'bw')
nycMap +
geom_point(aes(x = lon,
y = lat,
size = rides,
color = rides,
alpha = .5),
#alpha = .01,
data = uber_known.by_loc) +
scale_color_gradientn(trans = "log10",
guide = 'legend',
guide_colorbar(title = 'Pickups'),
breaks = my_breaks,
labels = comma, my_breaks,
colors = colorRampPalette(bias = .45,
rev(brewer.pal(11, 'RdYlGn')))(100)) +
ggtitle('Uber Pickups Scatterplot Map') +
scale_size(guide = 'none',
breaks = my_breaks) +
guides(alpha = F)
nycMap <- ggmap(nyc,
extent = "panel")
nycMap +
geom_point(aes(x = lon,
y = lat,
size = rides,
color = rides,
alpha = .5),
#alpha = .01,
data = uber_known.by_loc) +
scale_color_gradientn(trans = "log10",
guide = 'legend',
guide_colorbar(title = 'Pickups'),
breaks = my_breaks,
labels = comma, my_breaks,
colors = colorRampPalette(bias = .45,
rev(brewer.pal(11, 'RdYlGn')))(100)) +
ggtitle('Uber Pickups Scatterplot Map') +
scale_size(guide = 'none',
breaks = my_breaks) +
guides(alpha = F)
nyc <- get_map(location = c(lon_left,
lat_bottom,
lon_right,
lat_top),
source = 'stamen',
color = 'bw')
nyc <- get_map(location = c(lon_left,
lat_bottom,
lon_right,
lat_top),
source = 'stamen',
maptype = 'toner')
nycMap <- ggmap(nyc,
extent = "panel")
nycMap +
geom_point(aes(x = lon,
y = lat,
size = rides,
color = rides,
alpha = .5),
#alpha = .01,
data = uber_known.by_loc) +
scale_color_gradientn(trans = "log10",
guide = 'legend',
guide_colorbar(title = 'Pickups'),
breaks = my_breaks,
labels = comma, my_breaks,
colors = colorRampPalette(bias = .45,
rev(brewer.pal(11, 'RdYlGn')))(100)) +
ggtitle('Uber Pickups Scatterplot Map') +
scale_size(guide = 'none',
breaks = my_breaks) +
guides(alpha = F)
nycMap +
geom_point(aes(x = lon,
y = lat,
size = rides,
fill = rides,
alpha = .5),
#alpha = .01,
data = uber_known.by_loc) +
scale_fill_gradientn(trans = "log10",
guide = 'legend',
guide_colorbar(title = 'Pickups'),
breaks = my_breaks,
labels = comma, my_breaks,
colors = colorRampPalette(bias = .45,
rev(brewer.pal(11, 'RdYlGn')))(100)) +
ggtitle('Uber Pickups Scatterplot Map') +
scale_size(guide = 'none',
breaks = my_breaks) +
guides(alpha = F)
nycMap +
geom_point(aes(x = lon,
y = lat,
size = rides,
color = rides,
alpha = .5),
#alpha = .01,
data = uber_known.by_loc) +
scale_color_gradientn(trans = "log10",
guide = 'legend',
guide_colorbar(title = 'Pickups'),
breaks = my_breaks,
labels = comma, my_breaks,
colors = colorRampPalette(bias = .45,
rev(brewer.pal(11, 'RdYlGn')))(100)) +
ggtitle('Uber Pickups Scatterplot Map') +
scale_size(guide = 'none',
breaks = my_breaks) +
guides(alpha = F)
# Map Scatterplot of New York Pickups
lon_left <- min(taxi_lookup$lon)
lon_right <- max(taxi_lookup$lon)
lat_bottom <- min(taxi_lookup$lat)
lat_top <- max(taxi_lookup$lat)
my_breaks = c(400000,
100000,
50000,
10000,
1000,
100)
nyc <- get_map(location = c(lon_left,
lat_bottom,
lon_right,
lat_top),
source = 'stamen')
nycMap <- ggmap(nyc,
extent = "panel")
nycMap +
geom_point(aes(x = lon,
y = lat,
size = rides,
color = rides,
alpha = .5),
data = uber_known.by_loc) +
scale_color_gradientn(trans = "log10",
guide = 'legend',
guide_colorbar(title = 'Pickups'),
breaks = my_breaks,
labels = comma, my_breaks,
colors = colorRampPalette(bias = .45,
rev(brewer.pal(11, 'RdYlGn')))(100)) +
ggtitle('Uber Pickups Scatterplot Map') +
scale_size(guide = 'none',
breaks = my_breaks) +
guides(alpha = F)
range(uber_known.by_loc$rides)
# Map Scatterplot of New York Pickups
lon_left <- min(taxi_lookup$lon)
lon_right <- max(taxi_lookup$lon)
lat_bottom <- min(taxi_lookup$lat)
lat_top <- max(taxi_lookup$lat)
my_breaks = c(400000,
100000,
50000,
10000,
1000,
100)
nyc <- get_map(location = c(lon_left,
lat_bottom,
lon_right,
lat_top),
source = 'stamen',
maptype = 'toner')
nycMap <- ggmap(nyc,
extent = "panel")
nycMap +
geom_point(aes(x = lon,
y = lat,
size = rides,
color = rides,
alpha = .5),
#alpha = .01,
data = uber_known.by_loc) +
scale_color_gradientn(trans = "log10",
guide = 'legend',
guide_colorbar(title = 'Pickups'),
breaks = my_breaks,
labels = comma, my_breaks,
colors = colorRampPalette(bias = .45,
rev(brewer.pal(11, 'RdYlGn')))(100)) +
ggtitle('Uber Pickups Scatterplot Map') +
scale_size(guide = 'none',
breaks = my_breaks) +
guides(alpha = F)
View(uber_known.by_loc)
# Map Scatterplot of New York Pickups
lon_left <- min(-74.24)
lon_right <- max(-73.71)
lat_bottom <- min(40.53)
lat_top <- max(40.9)
my_breaks = c(400000,
100000,
50000,
10000,
1000,
100)
nyc <- get_map(location = c(lon_left,
lat_bottom,
lon_right,
lat_top),
source = 'stamen',
maptype = 'toner')
nycMap <- ggmap(nyc,
extent = "panel")
nycMap
str(uber)
geocodeQueryCheck()
str(diamonds)
print('hello!')
print('hello!')
print('hello!')
print('hello!')
print('hello!')
print('hello!')
# Map Scatterplot of New York Pickups
lon_left <- min(taxi_lookup$lon)
lon_right <- max(taxi_lookup$lon)
lat_bottom <- min(taxi_lookup$lat)
lat_top <- max(taxi_lookup$lat)
my_breaks = c(400000,
100000,
50000,
10000,
1000,
100)
nyc <- get_map(location = c(lon_left,
lat_bottom,
lon_right,
lat_top),
source = 'stamen',
maptype = 'toner')
nycMap <- ggmap(nyc,
extent = "panel")
nycMap +
geom_point(aes(x = lon,
y = lat,
size = rides,
color = rides,
alpha = .5),
#alpha = .01,
data = uber_known.by_loc) +
scale_color_gradientn(trans = "log10",
guide = 'legend',
guide_colorbar(title = 'Pickups'),
breaks = my_breaks,
labels = comma, my_breaks,
colors = colorRampPalette(bias = .45,
rev(brewer.pal(11,
'RdYlGn')))(100)) +
ggtitle('Uber Pickups Scatterplot Map') +
scale_size(guide = 'none',
breaks = my_breaks) +
guides(alpha = F)
# Map Scatterplot of New York Pickups
lon_left <- min(taxi_lookup$lon)
lon_right <- max(taxi_lookup$lon)
lat_bottom <- min(taxi_lookup$lat)
lat_top <- max(taxi_lookup$lat)
my_breaks = c(400000,
100000,
50000,
10000,
1000,
100)
nyc <- get_map(location = c(lon_left,
lat_bottom,
lon_right,
lat_top),
source = 'stamen',
maptype = 'toner')
nycMap <- ggmap(nyc,
extent = "panel")
nycMap +
geom_point(aes(x = lon,
y = lat,
size = rides,
color = rides,
alpha = .5),
#alpha = .01,
data = uber_known.by_loc) +
scale_color_gradientn(trans = "log10",
guide = 'legend',
guide_colorbar(title = 'Pickups'),
breaks = my_breaks,
labels = comma, my_breaks,
colors = colorRampPalette(bias = .45,
rev(brewer.pal(11,
'RdYlGn')))(100)) +
ggtitle('Uber Pickups Scatterplot Map') +
scale_size(guide = 'none',
breaks = my_breaks) +
guides(alpha = F)
warnings()
warnings()
taxi_lookup <- read.csv('taxi-zone-lookup.csv', stringsAsFactors = F)
# Edit Zones for more accurate location results
taxi_lookup[17, 3] <- 'Bedford-Stuyvesant'
taxi_lookup[23, 3] <- 'Bloomfield'
taxi_lookup[81, 3] <- 'Eastchester, Bronx'
# Get latitude and longitude info for location data (Long Process)
citystate = 'new york city new york'
taxi_lookup <- mutate(taxi_lookup,
lat = geocode(paste(Zone, citystate, sep = ', '), output = 'latlon')$lat,
lon = geocode(paste(Zone, citystate, sep = ', '), output = 'latlon')$lon)
warnings()
geocodeQueryCheck()
